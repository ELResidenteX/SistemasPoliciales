{% load static %}

<form method="post" action="{% url 'agregar_participante_infraccion' infraccion.id %}">
  {% csrf_token %}

  <!-- CARD: Datos del Participante -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-success text-white">
      ðŸ‘¥ Datos del Participante
    </div>
    <div class="card-body">
      <div class="mb-3">
        <label class="form-label">Calidad</label>
        <select name="calidad" id="calidad" class="form-select" required>
          <option value="">Seleccione...</option>
          <option value="vehiculo">VehÃ­culo</option>
          <option value="conductor">Conductor</option>
        </select>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="empadronado" name="empadronado">
        <label class="form-check-label" for="empadronado">
          Â¿Empadronado?
        </label>
      </div>
    </div>
  </div>

  <!-- CARD: Datos del VehÃ­culo -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-secondary text-white">
      ðŸš— Datos del VehÃ­culo
    </div>
    <div class="card-body">
      <div class="row g-3 mb-3">
        <div class="col-md-4">
          <label class="form-label">Tipo de VehÃ­culo</label>
          <select name="tipo_vehiculo" id="tipo_vehiculo" class="form-select" required>
            <option value="">Seleccione...</option>
            <option>Station Wagon</option>
            <option>Hatchback</option>
            <option>SedÃ¡n</option>
            <option>CoupÃ©</option>
            <option>Camioneta</option>
            <option>SUV</option>
            <option>Van</option>
            <option>Minivan</option>
            <option>City Car</option>
            <option>ElÃ©ctrico/HÃ­brido</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Marca</label>
          <select name="marca" id="marca" class="form-select" required disabled>
            <option value="">Seleccione marca...</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Modelo</label>
          <select name="modelo" id="modelo" class="form-select" required disabled>
            <option value="">Seleccione modelo...</option>
          </select>
        </div>
      </div>

      <div class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Color</label>
          <select name="color" class="form-select" required>
            <option value="">Seleccione...</option>
            <option>Rojo</option><option>Azul</option><option>Negro</option><option>Blanco</option><option>Gris</option>
            <option>Plateado</option><option>Verde</option><option>Amarillo</option><option>Naranja</option><option>CafÃ©</option>
            <option>Burdeo</option><option>Beige</option><option>Celeste</option><option>Dorado</option><option>Morado</option>
            <option>Rosado</option><option>Lila</option><option>Turquesa</option><option>Bronce</option><option>Multicolor</option>
            <option>Otro</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Placa Patente Ãšnica</label>
          <input type="text" name="placa_patente" class="form-control" required>
        </div>
        <div class="col-md-3">
          <label class="form-label">Chasis</label>
          <input type="text" name="chasis" class="form-control">
        </div>
        <div class="col-md-3">
          <label class="form-label">AÃ±o</label>
          <input type="number" name="anio" class="form-control" min="1900" max="2100">
        </div>
      </div>
    </div>
  </div>

  <!-- CARD: Datos del Infractor -->
  <div id="campos-infractor" class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
      ðŸ§¾ Datos del Infractor (Conductor)
    </div>
    <div class="card-body">
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label class="form-label">Nombres</label>
          <input type="text" name="nombres" class="form-control">
        </div>
        <div class="col-md-6">
          <label class="form-label">Apellidos</label>
          <input type="text" name="apellidos" class="form-control">
        </div>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-md-4">
          <label class="form-label">RUT</label>
          <input type="text" name="rut" class="form-control">
        </div>
        <div class="col-md-4">
          <label class="form-label">Fecha de Nacimiento</label>
          <input type="date" name="fecha_nacimiento" class="form-control">
        </div>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-md-4">
          <label class="form-label">RegiÃ³n</label>
          <select name="region" class="form-select" id="region_part" required>
            <option value="">Seleccione regiÃ³n</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Provincia</label>
          <select name="provincia" class="form-select" id="provincia_part" required disabled>
            <option value="">Seleccione provincia</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Comuna</label>
          <select name="comuna" class="form-select" id="comuna_part" required disabled>
            <option value="">Seleccione comuna</option>
          </select>
        </div>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-md-8">
          <label class="form-label">DirecciÃ³n</label>
          <input type="text" name="direccion" class="form-control">
        </div>
        <div class="col-md-4">
          <label class="form-label">NÃºmero</label>
          <input type="text" name="numero_direccion" class="form-control">
        </div>
      </div>
    </div>
  </div>

  <div class="text-end">
    <button type="submit" class="btn btn-success">âœ… Guardar Participante</button>
  </div>
</form>

<!-- Scripts -->
<script src="{% static 'infracciones/js/participantesinfraccion.js' %}"></script>
<script src="{% static 'infracciones/js/marcasModelos.js' %}"></script>

<script>
  // âœ… Script para mostrar/ocultar campos del infractor
  document.addEventListener('DOMContentLoaded', function () {
    const empadronadoCheckbox = document.getElementById('empadronado');
    const camposInfractor = document.getElementById('campos-infractor');

    function toggleCamposInfractor() {
      if (empadronadoCheckbox.checked) {
        camposInfractor.style.display = 'none';
      } else {
        camposInfractor.style.display = 'block';
      }
    }

    empadronadoCheckbox.addEventListener('change', toggleCamposInfractor);
    toggleCamposInfractor();  // Inicial
  });
</script>
