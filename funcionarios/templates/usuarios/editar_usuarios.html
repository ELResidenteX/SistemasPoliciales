{% extends "base.html" %}
{% block title %}Editar Usuario{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">✏️ Editar Usuario</h2>

<form method="post" class="card p-4 shadow-sm" style="max-width: 500px; margin:auto;">
    {% csrf_token %}
    
    <div class="mb-3">
        <label class="form-label">RUT</label>
        <input type="text" class="form-control" value="{{ perfil.rut }}" disabled>
    </div>

    <div class="mb-3">
        <label class="form-label">Nombres</label>
        <input type="text" class="form-control" name="first_name" value="{{ perfil.user.first_name }}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Apellidos</label>
        <input type="text" class="form-control" name="last_name" value="{{ perfil.user.last_name }}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Rol</label>
        <select class="form-select" name="rol" required>
            {% for value, label in perfil.ROLES %}
                <option value="{{ value }}" {% if perfil.rol == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Unidad Policial</label>
        <select class="form-select" name="unidad_policial" required>
            {% for unidad in unidades %}
                <option value="{{ unidad.id }}" {% if perfil.unidad_policial and perfil.unidad_policial.id == unidad.id %}selected{% endif %}>
                    {{ unidad.nombre }}
                </option>
            {% endfor %}
        </select>
    </div>

    <div class="text-center">
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="{% url 'lista_usuarios' %}" class="btn btn-secondary">Cancelar</a>
    </div>
</form>
{% endblock %}
