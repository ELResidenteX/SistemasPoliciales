{% extends "base.html" %}
{% block title %}GestiÃ³n de Usuarios{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">ğŸ‘¥ GestiÃ³n de Usuarios</h2>

<table class="table table-striped table-bordered shadow-sm align-middle">
  <thead class="table-success">
    <tr>
      <th>RUT</th>
      <th>Nombre completo</th>
      <th>Rol</th>
      <th>Unidad policial</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for u in usuarios %}
    <tr>
      <td>{{ u.rut }}</td>
      <td>{{ u.user.first_name }} {{ u.user.last_name }}</td>
      <td>{{ u.get_rol_display }}</td>
      <td>
        {% if u.unidad_policial %}
          {{ u.unidad_policial.nombre_unidad }}
        {% else %}
          <em>Sin asignar</em>
        {% endif %}
      </td>
      <td>
        <form method="post" style="display:inline;">
          {% csrf_token %}
          <input type="hidden" name="usuario_id" value="{{ u.id }}">
          <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Â¿Eliminar este usuario?')">
            ğŸ—‘ï¸ Eliminar
          </button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" class="text-center text-muted">No hay usuarios registrados.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="text-center mt-3">
  <a href="{% url 'crear_usuario' %}" class="btn btn-success">â• Crear nuevo usuario</a>
</div>
{% endblock %}
